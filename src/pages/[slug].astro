---
import { getCollection } from "astro:content"
import type { GetStaticPaths } from "astro"
import "../styles/global.css"

export const getStaticPaths = (async () => {
	const cards = await getCollection("cards")

	return cards.map((card) => ({
		params: { slug: card.data.slug },
		props: { headline: card.data.headline, content: card.data.content },
	}))
}) satisfies GetStaticPaths

// biome-ignore lint/correctness/noUnusedVariables: astro props
const { headline, content } = Astro.props
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
        <title>{headline}</title>
		<meta property="og:title" content={headline} />
		<!-- <meta property="og:description" content={content} /> -->
		<meta property="og:image" content="/gift.png" />
		<meta property="og:url" content={Astro.url} />
		<meta property="og:type" content="website" />
	</head>

	<body class="min-h-screen flex justify-center items-center bg-linear-to-br from-[#ff9a9e] via-[#fecfef] to-[#fecfef] font-sans m-0 p-0 overflow-hidden">
		<div class="perspective-[1000px] cursor-pointer" id="giftContainer">
			<div class="w-87.5 h-62.5 relative transform-3d transition-transform duration-800 ease" id="giftCard">
				<div class="card-front absolute inset-0 backface-hidden rounded-[15px] shadow-[0_10px_40px_rgba(0,0,0,0.2)] bg-linear-to-br from-[#ff6b6b] to-[#ee5a5a] flex flex-col justify-center items-center overflow-hidden before:absolute before:top-[-50%] before:left-[-50%] before:w-[200%] before:h-[200%] before:bg-[radial-gradient(circle,rgba(255,255,255,0.1)_0%,transparent_60%)] before:animate-shimmer">
					<img src="/gift.svg" alt="Gift" class="w-45 h-35 relative z-10" />
					<span class="absolute bottom-3.75 text-white text-xs opacity-90 animate-pulse">Tap to open!</span>
				</div>
				<div class="card-back absolute inset-0 backface-hidden rounded-[15px] shadow-[0_10px_40px_rgba(0,0,0,0.2)] bg-linear-to-br from-[#fff9f0] to-[#fff5e6] transform-[rotateX(180deg)] flex flex-col justify-center items-center p-7.5 text-center">
                    <h1 class="text-[#ff6b6b] text-2xl mb-4">{headline}</h1>
                    <p class="text-[#666] text-base leading-relaxed mb-5">{content}</p>
					<div class="text-5xl mt-2 animate-bounce">ðŸŽ‚</div>
				</div>
			</div>
		</div>
	</body>
</html>

<style>
	.open {
		transform: rotateX(180deg);
	}

	@keyframes shimmer {
		0%,100%{transform:rotate(0deg);}
		50%{transform:rotate(180deg);}
	}

	@keyframes bow-sway {
		0%,100%{transform:rotate(-30deg);}
		50%{transform:rotate(-20deg);}
	}

	.animate-shimmer {
		animation: shimmer 3s infinite;
	}

	.animate-bow-sway {
		animation: bow-sway 2s ease-in-out infinite;
	}
</style>

<script>
    document.getElementById('giftContainer')?.addEventListener('click', () => {
        document.getElementById('giftCard')?.classList.toggle('open');
    });
</script>
